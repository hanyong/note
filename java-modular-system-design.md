java 模块化系统设计
===

<div align="right">2014-07-05</div>

## 什么是模块化系统

### 模块化系统的意义

0. 更好的模块化, 拆分 classpath.
0. 更彻底的面向接口编程, 模块间松耦合, 透明替换.
0. 模块间依赖隔离, 避免依赖冲突.

### 模块化系统的定位

理想情况下, 应用所有组件都应该被模块化, 运行在模块化系统之上.

模块化系统分为两个部分:

0. 提供给模块使用的 **模块化层** 基础服务 **API**.
0. 负责安装, 管理, 启动, 停止各个模块的 **模块化框架**. 类似于传统概念上的容器, .

模块化系统具有如下特点:

0. 模块化层是仅次于 jvm 的基础设施.
0. 模块化框架对模块不可见, 模块只能看见模块化层 API. 

一个基于模块化系统构建的 webapp 整体结构示意图如下.

[[java-modular-system-design/webapp-sketch.png]]

>图中实线表示模块间的编译时依赖, 虚线表示运行时依赖.

在 eclipse OSGi 实现中, OSGi 框架本身也是一个模块, 
这样框架本身的实现会受到很多限制, 所以我们不采用这种方式.
模块化框架本身是一个普通的非模块化程序, 但它与模块也是隔离的.
模块化层 API 仍然作为一个特殊的模块存在, 由框架提供.

